<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Playground</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Cartoon Theme Colors */
            --glass-bg: rgba(20, 25, 40, 0.90);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: #b0c4de;
            --accent-blue: #0099ff;
            --accent-green: #55aa22;
            --danger: #ff5555;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url('Main-screen.png') no-repeat center center fixed; 
            background-size: cover;
            color: var(--text-main);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- Sidebar --- */
        aside {
            width: 280px;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-right: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            padding: 0;
            z-index: 10;
        }

        .brand-banner {
            width: 100%;
            height: 140px;
            background: url('Linux-playground.jpg') no-repeat center;
            background-size: cover;
            border-bottom: 1px solid var(--glass-border);
            position: relative;
        }
        
        .brand-banner::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 40px;
            background: linear-gradient(to top, var(--glass-bg), transparent);
        }

        nav { padding: 20px; flex: 1; }

        nav button {
            background: transparent;
            border: none;
            color: var(--text-muted);
            width: 100%;
            text-align: left;
            padding: 12px 15px;
            cursor: pointer;
            font-size: 1.05rem;
            border-radius: 12px;
            margin-bottom: 8px;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
        }

        nav button:hover { background: rgba(255,255,255,0.1); color: white; transform: translateX(5px); }
        nav button.active { 
            background: linear-gradient(90deg, var(--accent-blue), #0077cc); 
            color: white; 
            box-shadow: 0 4px 15px rgba(0, 153, 255, 0.4);
        }

        /* --- Main Content --- */
        main {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.4);
        }

        section {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            padding: 40px;
            overflow-y: auto;
            display: none;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        section.active { display: block; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h1 { 
            margin-top: 0; 
            font-size: 2.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            color: white;
        }

        /* --- Cards --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .card {
            background: rgba(30, 35, 50, 0.85);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            position: relative;
        }
        .card:hover { 
            transform: translateY(-5px) scale(1.02); 
            border-color: var(--accent-green);
            box-shadow: 0 15px 40px rgba(85, 170, 34, 0.2);
        }
        
        .card h3 { margin-top: 0; color: var(--accent-blue); font-size: 1.4rem; padding-right: 30px; }
        .card small { color: var(--text-muted); display: block; margin-bottom: 15px; font-size: 0.9rem; }

        /* Buttons */
        .btn {
            background: linear-gradient(45deg, var(--accent-green), #449911);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            margin-top: 15px;
            box-shadow: 0 4px 15px rgba(85, 170, 34, 0.4);
            transition: 0.2s;
        }
        .btn:hover { transform: scale(1.05); filter: brightness(1.1); }
        .btn-danger { background: var(--danger); box-shadow: none; }

        /* --- Terminal Window --- */
        #section-terminal {
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        #section-terminal.active { display: flex; }

        .terminal-window {
            width: 100%;
            max-width: 900px;
            height: 80vh;
            background: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            border: 1px solid #333;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
        }

        .terminal-header {
            background: #2d2d2d;
            padding: 10px 15px;
            display: flex;
            gap: 8px;
            border-bottom: 1px solid #333;
        }
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .red { background: #ff5f56; } .yellow { background: #ffbd2e; } .green { background: #27c93f; }

        .terminal-body {
            flex: 1;
            padding: 20px;
            color: #ccc;
            overflow-y: auto;
            font-size: 1.1rem;
            cursor: text;
        }
        .cmd-input { background: transparent; border: none; color: white; outline: none; font-family: inherit; font-size: inherit; flex: 1; }

        /* Forms */
        input, textarea, select {
            width: 100%;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--glass-border);
            color: white;
            border-radius: 8px;
            margin-bottom: 10px;
            font-family: inherit;
        }
        input:focus, textarea:focus { border-color: var(--accent-blue); outline: none; background: rgba(0,0,0,0.5); }

    </style>
</head>
<body>

    <aside>
        <div class="brand-banner"></div> 
        <nav>
            <button onclick="app.nav('home')" class="active"><i class="fa-solid fa-house"></i> Home</button>
            <button onclick="app.nav('terminal')"><i class="fa-solid fa-terminal"></i> Terminal</button>
            <button onclick="app.nav('labs')"><i class="fa-solid fa-flask"></i> Labs & Tools</button>
            <button onclick="app.nav('news')"><i class="fa-solid fa-bullhorn"></i> News</button>
            <button onclick="app.nav('about')"><i class="fa-solid fa-circle-info"></i> About</button>
            <div style="flex:1"></div>
            <button onclick="app.nav('login')" id="nav-login"><i class="fa-solid fa-user"></i> Login</button>
        </nav>
    </aside>

    <main>
        
        <section id="section-home" class="active">
            <h1>Welcome to the Playground</h1>
            <p style="font-size: 1.2rem; max-width: 600px;">
                Join the penguins! Explore Linux commands, complete labs, and unlock tools in a safe, simulated environment.
            </p>

            <div id="home-latest-news" class="card" style="margin-top: 20px; margin-bottom: 20px; border-left: 4px solid var(--accent-blue); display:none;">
                </div>
            
            <div class="grid">
                <div class="card" onclick="app.nav('terminal')" style="cursor:pointer">
                    <h3><i class="fa-solid fa-code"></i> Start Coding</h3>
                    <p>Launch the web-terminal simulation.</p>
                </div>
                <div class="card" onclick="app.nav('labs')" style="cursor:pointer">
                    <h3><i class="fa-solid fa-download"></i> Downloads</h3>
                    <p>Get the latest ISOs and scripts.</p>
                </div>
                <div class="card">
                    <h3><i class="fa-solid fa-trophy"></i> Your Progress</h3>
                    <p>Login to track completed labs.</p>
                </div>
            </div>
        </section>

        <section id="section-terminal">
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="dot red"></div>
                    <div class="dot yellow"></div>
                    <div class="dot green"></div>
                    <span style="margin-left: 10px; font-size: 0.9rem; color: #aaa;">guest@linux-playground:~</span>
                </div>
                <div class="terminal-body" onclick="document.getElementById('cmd-input').focus()">
                    <div id="term-history">
                        <div style="margin-bottom: 10px;">
                            <span style="color: var(--accent-green)">Welcome to Linux Playground OS v3.0</span><br>
                            Type 'help' to start.<br>
                        </div>
                    </div>
                    <div style="display: flex;">
                        <span id="term-prompt" style="color: var(--accent-blue); margin-right: 10px;">guest@linux:~$</span>
                        <input type="text" id="cmd-input" class="cmd-input" autocomplete="off" autofocus>
                    </div>
                </div>
            </div>
        </section>

        <section id="section-labs">
            <h1>Labs & Tools</h1>
            <button id="btn-add-lab" class="btn" style="display:none; margin-bottom:20px" onclick="app.showUpload()">+ Upload Lab (Admin)</button>
            <div class="grid" id="labs-grid"></div>
        </section>

        <section id="section-news">
            <h1>Announcements</h1>
            <div id="admin-news-panel" style="display:none; background:rgba(0,0,0,0.4); padding:20px; border-radius:12px; margin-bottom:20px; border:1px solid var(--accent-blue);">
                <h3><i class="fa-solid fa-pen"></i> New Announcement</h3>
                <input type="text" id="news-title" placeholder="Headline">
                <textarea id="news-body" placeholder="Message content..." style="height:80px"></textarea>
                <button class="btn" onclick="app.postNews()">Publish</button>
            </div>
            <div id="news-feed"></div>
        </section>

        <section id="section-login">
            <div style="max-width: 450px; margin: 50px auto;">
                <div class="card">
                    <h2 style="text-align: center; color: var(--accent-blue);">Member Access</h2>
                    <label>Username</label>
                    <input type="text" id="login-user" placeholder="Try 'admin' for features">
                    <button class="btn" style="width:100%; margin-top:10px;" onclick="app.login()">Sign In</button>
                </div>
                
                <div class="card" style="margin-top: 20px;">
                    <h3><i class="fa-solid fa-gift"></i> Redeem Code</h3>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="redeem-code" placeholder="SUDO-123" style="margin-bottom:0">
                        <button class="btn" style="margin-top:0" onclick="app.redeem()">Go</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="section-about">
            <div class="card" style="max-width: 800px; position:relative;">
                <div id="about-content"></div>
                <button id="btn-edit-about" class="btn" style="display:none; margin-top:20px;" onclick="app.openEditAbout()">
                    <i class="fa-solid fa-pen-to-square"></i> Edit Page
                </button>
            </div>
        </section>
    </main>

    <div id="upload-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100; justify-content:center; align-items:center; backdrop-filter: blur(5px);">
        <div class="card" style="width: 500px; background: #1e1e1e;">
            <h2>Upload Lab</h2>
            <input type="text" id="up-title" placeholder="Lab Title">
            <textarea id="up-desc" placeholder="Description"></textarea>
            <select id="up-type" onchange="app.toggleUpType()">
                <option value="link">GitHub Link (URL)</option>
                <option value="file">File (Local)</option>
            </select>
            <input type="text" id="up-url" placeholder="https://github.com/..." style="display:block">
            <input type="file" id="up-file" style="display:none">
            
            <div style="text-align:right; margin-top:20px">
                <button class="btn btn-danger" onclick="document.getElementById('upload-modal').style.display='none'">Cancel</button>
                <button class="btn" onclick="app.saveUpload()">Save</button>
            </div>
        </div>
    </div>

    <div id="about-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100; justify-content:center; align-items:center; backdrop-filter: blur(5px);">
        <div class="card" style="width: 600px; background: #1e1e1e;">
            <h2>Edit About Page</h2>
            <p style="color:#aaa; font-size:0.9rem;">You can use HTML tags here (e.g. &lt;h1&gt;, &lt;p&gt;, &lt;strong&gt;)</p>
            <textarea id="about-editor" style="height: 300px; font-family: monospace;"></textarea>
            
            <div style="text-align:right; margin-top:20px">
                <button class="btn btn-danger" onclick="document.getElementById('about-modal').style.display='none'">Cancel</button>
                <button class="btn" onclick="app.saveAbout()">Save Changes</button>
            </div>
        </div>
    </div>

<script>
const app = (() => {
    const ADMIN_PASS = "Net.codex1598";
    
    // Default About Content
    const defaultAbout = `<h1>About Us</h1>
<p>Linux Playground is dedicated to making open-source education fun.</p>
<hr style="border-color: rgba(255,255,255,0.1); margin: 20px 0;">
<h3>Credits</h3>
<p><strong>Art & Design:</strong> Community Penguin Project</p>
<p><strong>Development:</strong> SoulDragon</p>`;

    // --- STATE ---
    let state = {
        user: localStorage.getItem('lp_user') || 'Guest',
        isAdmin: localStorage.getItem('lp_token') === 'verified_admin',
        // About Content Logic
        about: localStorage.getItem('lp_about') || defaultAbout,
        
        labs: JSON.parse(localStorage.getItem('lp_labs')) || [
            { id: 1, title: 'Intro to Bash', date: '2026-05-10', desc: 'Navigating the file system.', link: '#' },
            { id: 2, title: 'Network Tools', date: '2026-05-12', desc: 'Using ping and curl.', link: '#' }
        ],
        news: JSON.parse(localStorage.getItem('lp_news')) || [
            { id: 1, title: 'New Look!', date: '2026-06-01', body: 'We have updated the playground with a new penguin theme.' }
        ]
    };

    const init = () => {
        // Data Repair
        let needsSave = false;
        state.labs = state.labs.map((l, i) => { if(!l.id) { needsSave=true; return {...l, id: Date.now()+i}; } return l; });
        state.news = state.news.map((n, i) => { if(!n.id) { needsSave=true; return {...n, id: Date.now()+i}; } return n; });
        if(needsSave) {
            localStorage.setItem('lp_labs', JSON.stringify(state.labs));
            localStorage.setItem('lp_news', JSON.stringify(state.news));
        }

        refresh();
        document.getElementById('cmd-input').addEventListener('keydown', e => {
            if(e.key === 'Enter') { runCmd(e.target.value); e.target.value = ''; }
        });
    };

    const nav = (id) => {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById('section-'+id).classList.add('active');
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        const btns = document.querySelectorAll('nav button');
        for(let btn of btns) {
            if(btn.getAttribute('onclick').includes(id)) btn.classList.add('active');
        }
        if(id === 'terminal') document.getElementById('cmd-input').focus();
    };

    const refresh = () => {
        // 1. Home News
        const latest = state.news[0];
        const homeBox = document.getElementById('home-latest-news');
        if(latest) {
            homeBox.style.display = 'block';
            homeBox.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <h3 style="margin:0; font-size:1.3rem;"><i class="fa-solid fa-bullhorn"></i> Latest: ${latest.title}</h3>
                    <small style="margin:0">${latest.date}</small>
                </div>
                <p style="margin:0; font-size:1.1rem; color:#e0e0e0;">${latest.body}</p>
            `;
        } else { homeBox.style.display = 'none'; }

        // 2. Auth
        const loginBtn = document.getElementById('nav-login');
        if (state.isAdmin) {
            loginBtn.innerHTML = `<i class="fa-solid fa-user-shield"></i> Admin`;
            loginBtn.style.color = '#ff5555'; 
        } else if (state.user !== 'Guest') {
            loginBtn.innerHTML = `<i class="fa-solid fa-user-check"></i> ${state.user}`;
            loginBtn.style.color = '#55aa22';
        } else {
            loginBtn.innerHTML = `<i class="fa-solid fa-user"></i> Login`;
            loginBtn.style.color = 'inherit';
        }

        document.getElementById('btn-add-lab').style.display = state.isAdmin ? 'inline-block' : 'none';
        document.getElementById('admin-news-panel').style.display = state.isAdmin ? 'block' : 'none';
        
        // 3. Render Labs
        const lc = document.getElementById('labs-grid'); lc.innerHTML = '';
        state.labs.forEach(l => {
            const delBtn = state.isAdmin ? 
                `<button onclick="app.deleteLab(${l.id})" style="position:absolute; top:15px; right:15px; background:transparent; border:none; color:#ff5555; cursor:pointer;"><i class="fa-solid fa-trash"></i></button>` : '';
            lc.innerHTML += `
            <div class="card">
                ${delBtn}
                <h3>${l.title}</h3>
                <small>${l.date}</small>
                <p>${l.desc}</p>
                <a href="${l.link}" class="btn">Download</a>
            </div>`;
        });

        // 4. Render News
        const nc = document.getElementById('news-feed'); nc.innerHTML = '';
        state.news.forEach(n => {
            const delBtn = state.isAdmin ? 
                `<button onclick="app.deleteNews(${n.id})" style="position:absolute; top:15px; right:15px; background:transparent; border:none; color:#ff5555; cursor:pointer;"><i class="fa-solid fa-trash"></i></button>` : '';
            nc.innerHTML += `
            <div class="card" style="margin-bottom:15px; position:relative;">
                ${delBtn}
                <h3>${n.title}</h3>
                <small>${n.date}</small>
                <p>${n.body}</p>
            </div>`;
        });

        // 5. Render About
        document.getElementById('about-content').innerHTML = state.about;
        document.getElementById('btn-edit-about').style.display = state.isAdmin ? 'inline-block' : 'none';
    };

    // --- ACTIONS ---
    const login = () => {
        const u = document.getElementById('login-user').value.trim();
        if(!u) return;
        if (u.toLowerCase() === 'admin') {
            if (prompt("Enter Password:") === ADMIN_PASS) {
                state.user = 'Admin'; state.isAdmin = true;
                localStorage.setItem('lp_token', 'verified_admin');
                alert("Welcome Admin.");
            } else { alert("Access Denied."); return; }
        } else {
            state.user = u; state.isAdmin = false;
            localStorage.removeItem('lp_token');
        }
        localStorage.setItem('lp_user', state.user);
        refresh(); nav('home');
    };

    const deleteLab = (id) => {
        if(!confirm("Delete this lab?")) return;
        state.labs = state.labs.filter(l => l.id !== id);
        localStorage.setItem('lp_labs', JSON.stringify(state.labs));
        refresh();
    };

    const deleteNews = (id) => {
        if(!confirm("Delete this news?")) return;
        state.news = state.news.filter(n => n.id !== id);
        localStorage.setItem('lp_news', JSON.stringify(state.news));
        refresh();
    };

    const runCmd = (cmd) => {
        const history = document.getElementById('term-history');
        const p = `${state.user}@linux:~$`;
        const div = document.createElement('div');
        div.innerHTML = `<span style="color:#0099ff">${p}</span> ${cmd}`;
        history.appendChild(div);
        
        const c = cmd.trim().split(' ');
        let r = '';
        if(c[0] === 'help') r = "Available: help, clear, ls, whoami, login [name]";
        else if(c[0] === 'clear') { history.innerHTML = ''; return; }
        else if(c[0] === 'ls') r = "Documents  Downloads  lab01.zip";
        else if(c[0] === 'whoami') r = state.user + (state.isAdmin ? " (Root)" : "");
        else if(c[0] === 'login') {
            if(c[1]) { document.getElementById('login-user').value = c[1]; login(); r = "Logged in."; }
            else r = "Usage: login [username]";
        }
        else r = `bash: ${c[0]}: command not found`;
        
        if(r) {
            const resp = document.createElement('div');
            resp.style.color = '#ccc'; resp.style.marginBottom = '10px';
            resp.innerText = r;
            history.appendChild(resp);
        }
        document.querySelector('.terminal-body').scrollTop = document.querySelector('.terminal-body').scrollHeight;
    };

    const showUpload = () => document.getElementById('upload-modal').style.display = 'flex';
    const toggleUpType = () => {
        const t = document.getElementById('up-type').value;
        document.getElementById('up-url').style.display = t === 'link' ? 'block' : 'none';
        document.getElementById('up-file').style.display = t === 'file' ? 'block' : 'none';
    };
    const saveUpload = () => {
        const title = document.getElementById('up-title').value;
        const desc = document.getElementById('up-desc').value;
        const type = document.getElementById('up-type').value;
        let link = document.getElementById('up-url').value;
        
        const finish = (lnk) => {
            state.labs.unshift({ id: Date.now(), title, desc, link: lnk, date: new Date().toISOString().split('T')[0] });
            localStorage.setItem('lp_labs', JSON.stringify(state.labs));
            refresh(); document.getElementById('upload-modal').style.display = 'none';
        };

        if(type === 'file') {
            const f = document.getElementById('up-file').files[0];
            if(f) {
                const reader = new FileReader();
                reader.onload = e => finish(e.target.result);
                reader.readAsDataURL(f);
            }
        } else finish(link);
    };

    const postNews = () => {
        const title = document.getElementById('news-title').value;
        const body = document.getElementById('news-body').value;
        if(title && body) {
            state.news.unshift({ id: Date.now(), title, body, date: new Date().toISOString().split('T')[0] });
            localStorage.setItem('lp_news', JSON.stringify(state.news));
            refresh();
            document.getElementById('news-title').value = ''; document.getElementById('news-body').value = '';
        }
    };

    // --- NEW: ABOUT PAGE EDITING ---
    const openEditAbout = () => {
        document.getElementById('about-editor').value = state.about;
        document.getElementById('about-modal').style.display = 'flex';
    };

    const saveAbout = () => {
        const newContent = document.getElementById('about-editor').value;
        state.about = newContent;
        localStorage.setItem('lp_about', newContent);
        refresh();
        document.getElementById('about-modal').style.display = 'none';
    };

    const redeem = () => {
        if(document.getElementById('redeem-code').value === 'PENGUIN') alert("Code Valid! +500 XP");
        else alert("Invalid Code");
    };

    return { init, nav, login, runCmd, showUpload, toggleUpType, saveUpload, postNews, redeem, deleteLab, deleteNews, openEditAbout, saveAbout };
})();

app.init();
</script>
</body>
</html>
